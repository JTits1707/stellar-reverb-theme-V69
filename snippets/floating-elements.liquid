{% comment %}
  Stellar Reverb Floating Elements Snippet — Upgraded Glitch Edition
  Neon cassettes, sonic glyphs, waveforms, and fractal particles with subtle glitching
{% endcomment %}

<div class="floating-elements-container">
  
  <!-- Neon Cassettes with Glitch -->
  <div class="floating-element cassette cassette-1 glitchable">
    <div class="cassette-body">
      <div class="cassette-window cassette-window-left"></div>
      <div class="cassette-window cassette-window-right"></div>
      <div class="cassette-reel cassette-reel-left"></div>
      <div class="cassette-reel cassette-reel-right"></div>
    </div>
  </div>
  
  <div class="floating-element cassette cassette-2 glitchable">
    <div class="cassette-body">
      <div class="cassette-window cassette-window-left"></div>
      <div class="cassette-window cassette-window-right"></div>
      <div class="cassette-reel cassette-reel-left"></div>
      <div class="cassette-reel cassette-reel-right"></div>
    </div>
  </div>
  
  <div class="floating-element cassette cassette-3 glitchable">
    <div class="cassette-body">
      <div class="cassette-window cassette-window-left"></div>
      <div class="cassette-window cassette-window-right"></div>
      <div class="cassette-reel cassette-reel-left"></div>
      <div class="cassette-reel cassette-reel-right"></div>
    </div>
  </div>
  
  <!-- Musical Symbols (Sonic Glyphs) -->
  <div class="floating-element musical-note note-1 glitchable">♪</div>
  <div class="floating-element musical-note note-2 glitchable">♫</div>
  <div class="floating-element musical-note note-3 glitchable">♬</div>
  <div class="floating-element musical-note note-4 glitchable">♩</div>
  <div class="floating-element musical-note note-5 glitchable">♭</div>
  <div class="floating-element musical-note note-6 glitchable">♯</div>
  
  <!-- Waveform Elements -->
  <div class="floating-element waveform waveform-1">
    <div class="wave-bar"></div>
    <div class="wave-bar"></div>
    <div class="wave-bar"></div>
    <div class="wave-bar"></div>
    <div class="wave-bar"></div>
  </div>
  
  <div class="floating-element waveform waveform-2">
    <div class="wave-bar"></div>
    <div class="wave-bar"></div>
    <div class="wave-bar"></div>
    <div class="wave-bar"></div>
    <div class="wave-bar"></div>
  </div>
  
  <!-- Fractal Particles (Upgraded from Basic) -->
  <div class="floating-element fractal-particle particle-1"></div>
  <div class="floating-element fractal-particle particle-2"></div>
  <div class="floating-element fractal-particle particle-3"></div>
  <div class="floating-element fractal-particle particle-4"></div>
  <div class="floating-element fractal-particle particle-5"></div>
  <div class="floating-element fractal-particle particle-6"></div>
  <div class="floating-element fractal-particle particle-7"></div>
  <div class="floating-element fractal-particle particle-8"></div>
  
  <!-- Sacred Geometry Shapes -->
  <div class="floating-element geometric triangle-1 glitchable"></div>
  <div class="floating-element geometric triangle-2 glitchable"></div>
  <div class="floating-element geometric circle-1 glitchable"></div>
  <div class="floating-element geometric circle-2 glitchable"></div>
  <div class="floating-element geometric square-1 glitchable"></div>
  <div class="floating-element geometric square-2 glitchable"></div>
  
</div>

<style>
  .floating-elements-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: hidden;
    z-index: 2;
  }
  
  .floating-element {
    position: absolute;
    opacity: 0.4; /* Lowered for subtler presence */
    animation-timing-function: ease-in-out;
    animation-iteration-count: infinite;
    animation-direction: alternate;
  }
  
  /* Glitch Effect for Select Elements */
  .glitchable {
    animation: glitch-float 12s ease-in-out infinite; /* Combined float + glitch */
  }
  
  @keyframes glitch-float {
    0%, 100% { transform: translate(0, 0); filter: none; }
    20% { transform: translate(5px, -10px); }
    40% { transform: translate(-5px, 5px); }
    60% { transform: translate(10px, -5px); }
    80% { transform: translate(-10px, 10px); }
    82% { clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%); filter: hue-rotate(90deg); transform: translate(-10px, 10px) skew(5deg); } /* Glitch burst */
    83% { clip-path: polygon(0 20%, 100% 0, 100% 80%, 0 100%); filter: hue-rotate(-90deg); transform: translate(10px, -10px) skew(-5deg); }
    84% { clip-path: none; filter: none; }
  }
  
  /* Neon Cassettes (Unchanged but with glitch class) */
  .cassette {
    width: 50px; /* Slightly smaller for subtlety */
    height: 35px;
  }
  
  .cassette-body {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, var(--neon-magenta), var(--cosmic-purple));
    border-radius: 4px;
    position: relative;
    box-shadow: 0 0 15px var(--neon-magenta); /* Toned down glow */
    border: 1px solid var(--electric-yellow);
  }
  
  /* ... (Keep existing cassette styles, reels spin, etc.) */
  
  /* Musical Notes (Sonic Glyphs) */
  .musical-note {
    font-size: 1.8rem; /* Subtler size */
    color: var(--radioactive-green);
    text-shadow: 0 0 10px var(--radioactive-green);
    font-weight: bold;
  }
  
  /* Waveforms (Unchanged, pulsing good) */
  
  /* Fractal Particles — Upgraded to Sacred Fractal Vibe */
  .fractal-particle {
    width: 6px;
    height: 6px;
    background: radial-gradient(circle, var(--electric-yellow), transparent);
    border-radius: 50%;
    box-shadow: 0 0 8px var(--cyan-blue);
    animation: fractal-pulse 4s ease-in-out infinite;
  }
  
  @keyframes fractal-pulse {
    0%, 100% { transform: scale(1); opacity: 0.4; }
    50% { transform: scale(1.5) rotate(45deg); opacity: 0.8; } /* Fractal twist */
  }
  
  /* Geometric Shapes — Add Glow + Subtle Rotate */
  .geometric {
    opacity: 0.3;
  }
  
  .triangle-1, .triangle-2 {
    width: 0;
    height: 0;
    border-left: 15px solid transparent;
    border-right: 15px solid transparent;
    border-bottom: 26px solid var(--cosmic-purple);
    animation: float-triangle-1 8s ease-in-out infinite;
  }
  
  .circle-1, .circle-2 {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: transparent;
    border: 2px solid var(--radioactive-green);
    box-shadow: 0 0 10px var(--radioactive-green);
  }
  
  .square-1, .square-2 {
    width: 18px;
    height: 18px;
    background: transparent;
    border: 2px solid var(--cyan-blue);
    transform: rotate(45deg);
    box-shadow: 0 0 10px var(--cyan-blue);
  }
  
  /* Keep existing float keyframes, add to glitchable if needed */
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const floatingElements = document.querySelectorAll('.floating-element');
    
    floatingElements.forEach((element, index) => {
      const randomDelay = Math.random() * 3; // Longer variance for chaos
      element.style.animationDelay = `${randomDelay}s`;
      
      const randomX = (Math.random() - 0.5) * 15;
      const randomY = (Math.random() - 0.5) * 15;
      element.style.transform = `translate(${randomX}px, ${randomY}px)`;
    });
    
    // Performance Observer (Unchanged)
    
    // Upgraded Parallax: Add Subtle Scroll Effect
    let lastScroll = 0;
    window.addEventListener('scroll', () => {
      const scrollDelta = window.scrollY - lastScroll;
      lastScroll = window.scrollY;
      floatingElements.forEach((el, idx) => {
        const speed = (idx % 4 + 1) * 0.2;
        el.style.transform += ` translateY(${scrollDelta * speed}px)`;
      });
    });
    
    // Mouse Parallax (Unchanged, desktop only)
    
    // Hover Glitch Trigger for Glitchables
    const glitchables = document.querySelectorAll('.glitchable');
    glitchables.forEach(el => {
      el.addEventListener('mouseenter', () => {
        el.style.animation = 'glitch-burst 0.5s ease-in-out';
      });
      el.addEventListener('animationend', () => {
        el.style.animation = 'glitch-float 12s ease-in-out infinite'; // Reset
      });
    });
  });
</script>