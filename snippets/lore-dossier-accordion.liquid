<div class="lore-dossier" data-section-id="{{ section.id }}">
  <div class="dossier-header">
    <span class="dossier-id">DECRYPTED_LOG_V.8</span>
    <span class="dossier-status animate-pulse">CONNECTION: STABLE</span>
  </div>

  <div class="dossier-nodes">
    {%- for i in (1..4) -%}
      {%- capture title_key -%}lore_title_{{ i }}{%- endcapture -%}
      {%- capture body_key -%}lore_body_{{ i }}{%- endcapture -%}
      
      {%- if capsule[title_key] != blank -%}
        <div class="dossier-node" data-node="{{ i }}">
          <button class="node-trigger" aria-expanded="false">
            <span class="node-number">0{{ i }}</span>
            <span class="node-title glitch-text" data-text="{{ capsule[title_key].value }}">
              {{ capsule[title_key].value | upcase }}
            </span>
            <div class="node-icon">
              <svg width="20" height="20" viewBox="0 0 20 20"><path d="M5 10h10M10 5l5 5-5 5" fill="none" stroke="currentColor" stroke-width="2"/></svg>
            </div>
          </button>
          
          <div class="node-content" aria-hidden="true">
            <div class="node-inner">
              <div class="node-metadata">
                <span>SECTOR: EVENT_HORIZON</span>
                <span>SIGNAL_TYPE: {{ capsule.theme_color.value | default: 'VOICE' }}</span>
              </div>
              <div class="node-text">
                {{ capsule[body_key].value }}
              </div>
            </div>
          </div>
        </div>
      {%- endif -%}
    {%- endfor -%}
  </div>
</div>