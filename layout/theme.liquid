<!doctype html>
<html class="no-js" lang="{{ request.locale.iso_code }}">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">

    <title>
      {%- if page_title == blank -%}
        {{ 'general.meta.title' | t: shop_name: shop.name }}
      {%- else -%}
        {{ page_title }}{% unless page_title contains shop.name %} ‚Äì {{ shop.name }}{% endunless %}
      {%- endif -%}
    </title>

    {%- if page_description -%}
      <meta name="description" content="{{ page_description | escape }}">
    {%- else -%}
      <meta name="description" content="Stellar Reverb ‚Äì cosmic apparel, analog mysticism, and wearable soundscapes broadcasting from the edge of reality.">
    {%- endif -%}

    <meta name="theme-color" content="#0D0D0D">
    <link rel="icon" type="image/png" href="{{ 'favicon.png' | asset_url }}">
    <link rel="preconnect" href="https://cdn.shopify.com" crossorigin>

    <style>
      :root {
        --void-black: {{ settings.color_void_black | default: '#0D0D0D' }};
        --neon-magenta: {{ settings.color_neon_magenta | default: '#E13CFA' }};
        --cyan-blue: {{ settings.color_cyan_blue | default: '#28A8D6' }};
        --radioactive-green: {{ settings.color_radioactive_green | default: '#00F0AC' }};
        --cosmic-purple: {{ settings.color_cosmic_purple | default: '#6C24B3' }};
        --electric-yellow: {{ settings.color_electric_yellow | default: '#F4FF30' }};
        --chrome-silver: {{ settings.color_chrome_silver | default: '#B0B0B0' }};

        --font-title: 'Orbitron', system-ui, sans-serif;
        --font-body: 'PP Mori', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        --font-accent: 'PP Neue Machina', system-ui, sans-serif;
      }

      html {
        font-family: var(--font-body);
        background-color: var(--void-black);
        color: #f9fafb;
      }
    </style>

    {{ 'brand-fonts.css' | asset_url | stylesheet_tag }}
    {{ 'base.css' | asset_url | stylesheet_tag }}
    {{ 'theme-base.css' | asset_url | stylesheet_tag }}
    {{ 'theme-variables.css' | asset_url | stylesheet_tag }}

    {%- comment -%} Load Beast Mode Styles {%- endcomment -%}
    {{ 'stellar-transmission-archive.css' | asset_url | stylesheet_tag }}

    {%- comment -%} Optional/Existing Logic {%- endcomment -%}
    {% if 'stellar-reverb-performance.css' | asset_url %}{{ 'stellar-reverb-performance.css' | asset_url | stylesheet_tag }}{% endif %}
    {% if 'hero-decoding.css' | asset_url %}{{ 'hero-decoding.css' | asset_url | stylesheet_tag }}{% endif %}
    {% if 'floating-elements.css' | asset_url %}{{ 'floating-elements.css' | asset_url | stylesheet_tag }}{% endif %}

    {{ content_for_header }}

    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "{{ shop.name | escape }}",
        "url": "{{ shop.url }}",
        "logo": "{{ 'stellar-logo.png' | asset_url }}",
        "sameAs": [
          {% if settings.social_instagram != blank %}"{{ settings.social_instagram }}"{% endif %}
        ]
      }
    </script>
  </head>

  <body class="template-{{ template.name | handle }} template-{{ template | replace: '.', '-' | replace: '/', '-' }}">
    
    {%- comment -%} üõ∞Ô∏è GLOBAL TERMINAL HANDSHAKE OVERLAY {%- endcomment -%}
    <div id="stellar-terminal-handshake" class="terminal-boot-overlay" aria-hidden="true">
      <div class="terminal-boot-frame">
        <div class="terminal-boot-scanline"></div>
        <div class="terminal-boot-content">
          <div class="boot-header">
            <span class="boot-icon">üõ∞Ô∏è</span>
            <span class="boot-title">STELLAR_REVERB_OS // V.69</span>
          </div>
          <div class="boot-loader">
            <div id="boot-progress-bar"></div>
          </div>
          <div class="boot-logs" id="boot-logs">
            <p class="log-entry">> INITIALIZING_CONNECTION...</p>
          </div>
        </div>
      </div>
    </div>

    <a class="skip-to-content sr-only focus:not-sr-only" href="#MainContent">
      {{ 'accessibility.skip_to_content' | t | default: 'Skip to main content' }}
    </a>

    {% section 'header-enhanced' %}

    <main id="MainContent" role="main" tabindex="-1" class="main-content">
      {{ content_for_layout }}
    </main>

    {% section 'stellar-footer' %}

    {%- comment -%} Core JS Logic {%- endcomment -%}
    <script src="{{ 'stellar-transmission-archive.js' | asset_url }}" defer></script>
    {% if 'global.js' | asset_url %}<script src="{{ 'global.js' | asset_url }}" defer></script>{% endif %}

    {%- comment -%} Page-Specific JS {%- endcomment -%}
    {% if template contains 'universal-lore' or template contains 'lore' %}
      <script src="{{ 'stellar-reverb-lore.js' | asset_url }}" defer></script>
    {% endif %}

    {% if template contains 'collection' %}
      <script src="{{ 'stellar-shop-all.js' | asset_url }}" defer></script>
    {% endif %}

  </body>
</html>